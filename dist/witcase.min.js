(function(e, a) { for(var i in a) e[i] = a[i]; }(exports, /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 5);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var route_service_1 = __webpack_require__(6);
var Witcase = /** @class */ (function () {
    function Witcase() {
        var _this = this;
        this.views = [];
        this.controllers = [];
        this.route = new route_service_1.RouteService();
        this.create = function () {
            _this.defaultAction();
        };
        this.preload = function () {
            for (var _i = 0, _a = Witcase.resourceLoaders; _i < _a.length; _i++) {
                var resourceLoader = _a[_i];
                resourceLoader(_this.engine);
            }
        };
        this.update = function () {
            for (var _i = 0, _a = _this.controllers; _i < _a.length; _i++) {
                var controller = _a[_i];
                controller.checkModelChanges();
            }
            for (var _b = 0, _c = _this.views; _b < _c.length; _b++) {
                var view = _c[_b];
                view.checkModelChanges();
                view.updateView();
            }
        };
        this.render = function () {
            for (var _i = 0, _a = _this.views; _i < _a.length; _i++) {
                var view = _a[_i];
                view.renderView();
            }
        };
    }
    Witcase.create = function () {
        Witcase.current = new Witcase();
        return Witcase.current;
    };
    Witcase.prototype.start = function (engineStarter) {
        this.engine = engineStarter(this);
    };
    Witcase.preload = function (resourceLoader) {
        Witcase.resourceLoaders.push(resourceLoader);
    };
    Witcase.prototype.registerView = function (view) {
        this.views.push(view);
    };
    Witcase.prototype.unregisterView = function (viewToRemove) {
        this.views = this.views.filter(function (view) { return viewToRemove !== view; });
    };
    Witcase.prototype.registerController = function (controller) {
        this.controllers.push(controller);
    };
    Witcase.resourceLoaders = [];
    return Witcase;
}());
exports.Witcase = Witcase;


/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var rxjs_1 = __webpack_require__(3);
var _ = __webpack_require__(8);
var ModelObservable = /** @class */ (function () {
    function ModelObservable() {
    }
    return ModelObservable;
}());
var ModelObservableFactory = /** @class */ (function () {
    function ModelObservableFactory() {
        this.modelObservables = [];
    }
    ModelObservableFactory.prototype.createModelObservable = function (getModel) {
        var modelObservable = new ModelObservable();
        modelObservable.observable = rxjs_1.Observable.create(function (observer) { return modelObservable.observer = observer; }).map(function (model) { return _.cloneDeep(model); }).distinctUntilChanged(function (prev, next) { return _.isEqual(prev, next); });
        modelObservable.getModel = getModel;
        this.modelObservables.push(modelObservable);
        return modelObservable.observable.skip(1); //we wait until change
    };
    ModelObservableFactory.prototype.onChange = function (getModel) {
        return this.createModelObservable(getModel);
    };
    ModelObservableFactory.prototype.checkModelChanges = function () {
        for (var _i = 0, _a = this.modelObservables; _i < _a.length; _i++) {
            var modelObservable = _a[_i];
            modelObservable.observer.next(modelObservable.getModel());
        }
    };
    return ModelObservableFactory;
}());
exports.ModelObservableFactory = ModelObservableFactory;


/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var rxjs_1 = __webpack_require__(3);
var WitcaseObservable = /** @class */ (function () {
    function WitcaseObservable() {
        this.subject = new rxjs_1.Subject();
        this.observable = new rxjs_1.Observable().multicast(this.subject);
    }
    WitcaseObservable.prototype.subscribe = function (observer) {
        this.observable.subscribe(observer);
    };
    WitcaseObservable.prototype.publish = function (value) {
        this.subject.next(value);
    };
    return WitcaseObservable;
}());
exports.WitcaseObservable = WitcaseObservable;


/***/ }),
/* 3 */
/***/ (function(module, exports) {

module.exports = require("@reactivex/rxjs");

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var witcase_observable_1 = __webpack_require__(2);
var ViewObservable = /** @class */ (function (_super) {
    __extends(ViewObservable, _super);
    function ViewObservable() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ViewObservable.prototype.subscribe = function (observer) {
        _super.prototype.subscribe.call(this, observer);
    };
    ViewObservable.prototype.publish = function (value) {
        _super.prototype.publish.call(this, value);
    };
    return ViewObservable;
}(witcase_observable_1.WitcaseObservable));
exports.ViewObservable = ViewObservable;


/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var witcase_1 = __webpack_require__(0);
exports.Witcase = witcase_1.Witcase;
var controller_1 = __webpack_require__(7);
exports.Controller = controller_1.Controller;
var view_1 = __webpack_require__(9);
exports.View = view_1.View;
exports.ViewComponent = view_1.ViewComponent;
var model_observable_factory_1 = __webpack_require__(1);
exports.ModelObservableFactory = model_observable_factory_1.ModelObservableFactory;
var view_observable_1 = __webpack_require__(4);
exports.ViewObservable = view_observable_1.ViewObservable;


/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var witcase_observable_1 = __webpack_require__(2);
var RouteActionParams = /** @class */ (function () {
    function RouteActionParams(route, action, params) {
        this.route = route;
        this.action = action;
        this.params = params;
    }
    return RouteActionParams;
}());
exports.RouteActionParams = RouteActionParams;
var RouteService = /** @class */ (function (_super) {
    __extends(RouteService, _super);
    function RouteService() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    RouteService.prototype.goTo = function (route, action, params) {
        this.publish(new RouteActionParams(route, action, params));
    };
    RouteService.prototype.onRoute = function (route, observer) {
        this.observable.filter(function (routeActionParams) { return routeActionParams.route == route; }).subscribe(observer);
    };
    return RouteService;
}(witcase_observable_1.WitcaseObservable));
exports.RouteService = RouteService;


/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var witcase_1 = __webpack_require__(0);
var model_observable_factory_1 = __webpack_require__(1);
/**
 * Controller accepts input from view and converts modifieds the model.
 */
var Controller = /** @class */ (function (_super) {
    __extends(Controller, _super);
    //TODO: we should inject with typescript-ioc
    function Controller(witcase) {
        if (witcase === void 0) { witcase = witcase_1.Witcase.current; }
        var _this = _super.call(this) || this;
        _this.witcase = witcase;
        _this.witcase.registerController(_this);
        _this.route = _this.witcase.route;
        return _this;
    }
    return Controller;
}(model_observable_factory_1.ModelObservableFactory));
exports.Controller = Controller;


/***/ }),
/* 8 */
/***/ (function(module, exports) {

module.exports = require("lodash");

/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var witcase_1 = __webpack_require__(0);
var model_observable_factory_1 = __webpack_require__(1);
var view_observable_1 = __webpack_require__(4);
/**
 * Adds a component to the view and other view components
 */
var ViewComponentAdder = /** @class */ (function () {
    function ViewComponentAdder(components, view) {
        this.components = components;
        this.view = view;
    }
    ViewComponentAdder.prototype.addComponent = function (component) {
        this.components.push(component);
        component.createComponent(this, this.view);
        return component;
    };
    return ViewComponentAdder;
}());
exports.ViewComponentAdder = ViewComponentAdder;
/**
 * Input and ouput for the application
 */
var View = /** @class */ (function (_super) {
    __extends(View, _super);
    //TODO: we should inject with typescript-ioc
    function View(witcase) {
        if (witcase === void 0) { witcase = witcase_1.Witcase.current; }
        var _this = _super.call(this) || this;
        _this.witcase = witcase;
        _this.components = [];
        _this.componentAdder = new ViewComponentAdder(_this.components, _this);
        _this.onCreated = new view_observable_1.ViewObservable();
        _this.created = false;
        _this.witcase.registerView(_this);
        return _this;
    }
    View.prototype.create = function (_componentAdder) {
        //empty, can be overrided or not
    };
    View.prototype.update = function (_componentAdder) {
        //empty, can be overrided or not
    };
    View.prototype.render = function () {
        //empty, can be overrided or not
    };
    View.prototype.show = function () {
        this.createView();
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.showComponent();
        }
    };
    View.prototype.hide = function () {
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.hideComponent();
        }
    };
    Object.defineProperty(View.prototype, "engine", {
        get: function () { return this.witcase.engine; },
        enumerable: true,
        configurable: true
    });
    View.prototype.createView = function () {
        if (this.created)
            return;
        this.created = true;
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.createComponent(this.componentAdder, this);
        }
        this.create(this.componentAdder);
        this.onCreated.publish();
    };
    View.prototype.updateView = function () {
        if (!this.created)
            return;
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.updateComponent(this.componentAdder);
        }
        this.update(this.componentAdder);
    };
    View.prototype.renderView = function () {
        if (!this.created)
            return;
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.renderComponent();
        }
        this.render();
    };
    View.prototype.destroy = function () {
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.destroyComponent();
        }
        this.witcase.unregisterView(this);
        this.destroy();
    };
    return View;
}(model_observable_factory_1.ModelObservableFactory));
exports.View = View;
/**
 * Component to be showed in view
 */
var ViewComponent = /** @class */ (function () {
    function ViewComponent() {
        this.components = [];
        this._visible = true;
        this._localCall = false;
    }
    ViewComponent.prototype.create = function (_componentAdder) {
        //empty, can be overrided or not
    };
    ViewComponent.prototype.update = function (_componentAdder) {
        //empty, can be overrided or not
    };
    ViewComponent.prototype.render = function () {
        //empty, can be overrided or not
    };
    ViewComponent.prototype.destroy = function () {
        //empty, can be overrided or not
    };
    ViewComponent.prototype.createComponent = function (componentAdder, view) {
        this.view = view;
        this.create(componentAdder);
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.createComponent(componentAdder, view);
        }
    };
    ViewComponent.prototype.updateComponent = function (componentAdder) {
        this.update(componentAdder);
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.updateComponent(componentAdder);
        }
    };
    ViewComponent.prototype.renderComponent = function () {
        this.render();
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.renderComponent();
        }
    };
    ViewComponent.prototype.destroyComponent = function () {
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.destroyComponent();
        }
        this.destroy();
    };
    ViewComponent.prototype.hideComponent = function () {
        this._localCall = true;
        this.hide();
    };
    ViewComponent.prototype.hideAllComponents = function () {
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.hideComponent();
        }
    };
    ViewComponent.prototype.showComponent = function () {
        if (this._visible) {
            this._localCall = true;
            this.show();
        }
    };
    ViewComponent.prototype.showAllComponents = function () {
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.showComponent();
        }
    };
    ViewComponent.prototype.hide = function () {
        this.hideAllComponents();
        if (this._localCall)
            this._localCall = false; //no set _visible false if show comes from view show method
        else
            this._visible = false;
    };
    ViewComponent.prototype.show = function () {
        this.showAllComponents();
        if (this._localCall)
            this._localCall = false; //no set _visible true if show comes from view show method
        else
            this._visible = true;
    };
    Object.defineProperty(ViewComponent.prototype, "engine", {
        get: function () {
            return this.view.engine;
        },
        enumerable: true,
        configurable: true
    });
    return ViewComponent;
}());
exports.ViewComponent = ViewComponent;


/***/ })
/******/ ])));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgZTczMGE4MTZlNmUxOWZjZmRhOTMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dpdGNhc2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsX29ic2VydmFibGVfZmFjdG9yeS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvd2l0Y2FzZV9vYnNlcnZhYmxlLnRzIiwid2VicGFjazovLy9leHRlcm5hbCBcIkByZWFjdGl2ZXgvcnhqc1wiIiwid2VicGFjazovLy8uL3NyYy92aWV3X29ic2VydmFibGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9yb3V0ZV9zZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVyLnRzIiwid2VicGFjazovLy9leHRlcm5hbCBcImxvZGFzaFwiIiwid2VicGFjazovLy8uL3NyYy92aWV3LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUNBQTJCLDBCQUEwQixFQUFFO0FBQ3ZELHlDQUFpQyxlQUFlO0FBQ2hEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhEQUFzRCwrREFBK0Q7O0FBRXJIO0FBQ0E7O0FBRUE7QUFDQTs7Ozs7Ozs7OztBQ3ZEQSw2Q0FBK0M7QUFFL0M7SUFZRTtRQUFBLGlCQUNDO1FBTk8sVUFBSyxHQUFjLEVBQUUsQ0FBQztRQUN0QixnQkFBVyxHQUFvQixFQUFFLENBQUM7UUFFbkMsVUFBSyxHQUFpQixJQUFJLDRCQUFZLEVBQUUsQ0FB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aUIsR0FBekI7UUFDRSxHQUFHLENBQUMsQ0FBb0IsVUFBZSxFQUFmLFNBQUksQ0FBQyxVQUFVLEVBQWYsY0FBZSxFQUFmLElBQWU7WUFBbEMsSUFBTSxTQUFTO1lBQ2xCLFNBQVMsQ0FBQyxhQUFhLEVBQUUsQ0FBQztTQUMzQjtJQUNILENBQUM7SUFFTSw0QkFBSSxHQUFYO1FBQ0UsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDekIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQztZQUFDLElBQUksQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDLENBQUMsMkRBQTJEO1FBQ3pHLElBQUk7WUFBQyxJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztJQUM3QixDQUFDO0lBRU0sNEJBQUksR0FBWDtRQUNFLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQ3pCLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUM7WUFBQyxJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQyxDQUFDLDBEQUEwRDtRQUN4RyxJQUFJO1lBQUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7SUFDNUIsQ0FBQztJQUVELHNCQUFjLGlDQUFNO2FBQXBCO1lBQ0UsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQzFCLENBQUM7OztPQUFBO0lBQ0gsb0JBQUM7QUFBRCxDQUFDO0FBMUZxQixzQ0FBYSIsImZpbGUiOiJ3aXRjYXNlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDUpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIGU3MzBhODE2ZTZlMTlmY2ZkYTkzIiwiLyoqXG4gKi9cbmltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tICcuL2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgQmFzZUVuZ2luZSB9IGZyb20gJy4vYmFzZV9lbmdpbmUnO1xuaW1wb3J0IHsgVmlldyB9IGZyb20gJy4vdmlldyc7XG5pbXBvcnQgeyBHdWlkIH0gZnJvbSAnLi9ndWlkJztcbmltcG9ydCB7IFJvdXRlU2VydmljZSB9IGZyb20gJy4vcm91dGVfc2VydmljZSc7XG5cbmV4cG9ydCBjbGFzcyBXaXRjYXNlPFQ+IGltcGxlbWVudHMgQmFzZUVuZ2luZSB7XG4gIHB1YmxpYyBlbmdpbmU6IFQ7XG5cbiAgcHVibGljIGRlZmF1bHRBY3Rpb246ICgpID0+IHZvaWQ7XG5cbiAgcHVibGljIHN0YXRpYyBjdXJyZW50OiBhbnk7XG5cbiAgcHJpdmF0ZSB2aWV3czogVmlldzxUPltdID0gW107XG4gIHByaXZhdGUgY29udHJvbGxlcnM6IENvbnRyb2xsZXI8VD5bXSA9IFtdO1xuXG4gIHB1YmxpYyByb3V0ZTogUm91dGVTZXJ2aWNlID0gbmV3IFJvdXRlU2VydmljZSgpO1xuXG4gIHByaXZhdGUgY29uc3RydWN0b3IoKXtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgY3JlYXRlPFQ+KCl7XG4gICAgV2l0Y2FzZS5jdXJyZW50ID0gbmV3IFdpdGNhc2U8VD4oKTtcbiAgICByZXR1cm4gV2l0Y2FzZS5jdXJyZW50O1xuICB9XG5cbiAgcHVibGljIHN0YXJ0KGVuZ2luZVN0YXJ0ZXI6IChiYXNlRW5naW5lOiBCYXNlRW5naW5lKSA9PiBUKTogdm9pZCB7XG4gICAgdGhpcy5lbmdpbmUgPSBlbmdpbmVTdGFydGVyKHRoaXMpO1xuICB9XG5cbiAgcHVibGljIGNyZWF0ZSA9ICgpOiB2b2lkID0+IHtcbiAgICB0aGlzLmRlZmF1bHRBY3Rpb24oKTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIHJlc291cmNlTG9hZGVyczogKChlbmdpbmU6IGFueSkgPT4gdm9pZClbXSA9IFtdO1xuXG4gIHB1YmxpYyBzdGF0aWMgcHJlbG9hZDxUPihyZXNvdXJjZUxvYWRlcjogKGVuZ2luZTogVCk9PnZvaWQpOnZvaWQge1xuICAgIFdpdGNhc2UucmVzb3VyY2VMb2FkZXJzLnB1c2gocmVzb3VyY2VMb2FkZXIpO1xuICB9XG5cbiAgcHVibGljIHByZWxvYWQgPSAoKTogdm9pZCA9PiB7XG4gICAgZm9yIChjb25zdCByZXNvdXJjZUxvYWRlciBvZiBXaXRjYXNlLnJlc291cmNlTG9hZGVycyl7XG4gICAgICByZXNvdXJjZUxvYWRlcih0aGlzLmVuZ2luZSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHVwZGF0ZSA9ICgpOiB2b2lkID0+IHtcbiAgICBmb3IgKGNvbnN0IGNvbnRyb2xsZXIgb2YgdGhpcy5jb250cm9sbGVycyl7XG4gICAgICBjb250cm9sbGVyLmNoZWNrTW9kZWxDaGFuZ2VzKCk7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCB2aWV3IG9mIHRoaXMudmlld3Mpe1xuICAgICAgdmlldy5jaGVja01vZGVsQ2hhbmdlcygpO1xuICAgICAgdmlldy51cGRhdGVWaWV3KCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlbmRlciA9ICgpOiB2b2lkID0+IHtcbiAgICBmb3IgKGNvbnN0IHZpZXcgb2YgdGhpcy52aWV3cyl7XG4gICAgICB2aWV3LnJlbmRlclZpZXcoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVnaXN0ZXJWaWV3KHZpZXc6IFZpZXc8VD4pe1xuICAgIHRoaXMudmlld3MucHVzaCh2aWV3KTtcbiAgfVxuXG4gIHB1YmxpYyB1bnJlZ2lzdGVyVmlldyh2aWV3VG9SZW1vdmU6IFZpZXc8VD4pe1xuICAgIHRoaXMudmlld3MgPSB0aGlzLnZpZXdzLmZpbHRlcigodmlldykgPT4geyByZXR1cm4gdmlld1RvUmVtb3ZlICE9PSB2aWV3IH0pO1xuICB9XG5cbiAgcHVibGljIHJlZ2lzdGVyQ29udHJvbGxlcihjb250cm9sbGVyOiBDb250cm9sbGVyPFQ+KXtcbiAgICB0aGlzLmNvbnRyb2xsZXJzLnB1c2goY29udHJvbGxlcik7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy93aXRjYXNlLnRzIiwiaW1wb3J0IHsgT2JzZXJ2YWJsZSwgT2JzZXJ2ZXIgfSBmcm9tICdAcmVhY3RpdmV4L3J4anMnO1xuaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gnO1xuXG5jbGFzcyBNb2RlbE9ic2VydmFibGU8VD4ge1xuICBvYnNlcnZhYmxlOiBPYnNlcnZhYmxlPFQ+O1xuICBvYnNlcnZlcjogT2JzZXJ2ZXI8KCkgPT4gVD47XG4gIGdldE1vZGVsOiAoKSA9PiBUO1xufVxuXG5leHBvcnQgY2xhc3MgTW9kZWxPYnNlcnZhYmxlRmFjdG9yeSB7XG4gIHByaXZhdGUgbW9kZWxPYnNlcnZhYmxlczogTW9kZWxPYnNlcnZhYmxlPGFueT5bXSA9IFtdO1xuXG4gIHByaXZhdGUgY3JlYXRlTW9kZWxPYnNlcnZhYmxlPFQ+KGdldE1vZGVsOiAoKSA9PiBUKTogT2JzZXJ2YWJsZTxUPiB7XG4gICAgY29uc3QgbW9kZWxPYnNlcnZhYmxlID0gbmV3IE1vZGVsT2JzZXJ2YWJsZTxUPigpO1xuXG4gICAgbW9kZWxPYnNlcnZhYmxlLm9ic2VydmFibGUgPSBPYnNlcnZhYmxlLmNyZWF0ZShcbiAgICAgIChvYnNlcnZlcjogT2JzZXJ2ZXI8KCkgPT4gVD4pID0+IG1vZGVsT2JzZXJ2YWJsZS5vYnNlcnZlciA9IG9ic2VydmVyXG4gICAgKS5tYXAoXG4gICAgICAobW9kZWw6IFQpID0+IF8uY2xvbmVEZWVwKG1vZGVsKVxuICAgICkuZGlzdGluY3RVbnRpbENoYW5nZWQoXG4gICAgICAocHJldjogVCwgbmV4dDogVCkgPT4gXy5pc0VxdWFsKHByZXYsIG5leHQpXG4gICAgKTtcblxuICAgIG1vZGVsT2JzZXJ2YWJsZS5nZXRNb2RlbCA9IGdldE1vZGVsO1xuXG4gICAgdGhpcy5tb2RlbE9ic2VydmFibGVzLnB1c2gobW9kZWxPYnNlcnZhYmxlKTsgXG5cbiAgICByZXR1cm4gbW9kZWxPYnNlcnZhYmxlLm9ic2VydmFibGUuc2tpcCgxKTsgLy93ZSB3YWl0IHVudGlsIGNoYW5nZVxuICB9XG5cbiAgcHJvdGVjdGVkIG9uQ2hhbmdlPFQ+KGdldE1vZGVsOiAoKSA9PiBUKTogT2JzZXJ2YWJsZTxUPiB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlTW9kZWxPYnNlcnZhYmxlKGdldE1vZGVsKTtcbiAgfVxuXG4gIHB1YmxpYyBjaGVja01vZGVsQ2hhbmdlcygpe1xuICAgIGZvcihjb25zdCBtb2RlbE9ic2VydmFibGUgb2YgdGhpcy5tb2RlbE9ic2VydmFibGVzKXtcbiAgICAgIG1vZGVsT2JzZXJ2YWJsZS5vYnNlcnZlci5uZXh0KG1vZGVsT2JzZXJ2YWJsZS5nZXRNb2RlbCgpKTtcbiAgICB9XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9tb2RlbF9vYnNlcnZhYmxlX2ZhY3RvcnkudHMiLCJpbXBvcnQgeyBPYnNlcnZhYmxlLCBPYnNlcnZlciwgU3ViamVjdCB9IGZyb20gJ0ByZWFjdGl2ZXgvcnhqcyc7XG5cbmV4cG9ydCBjbGFzcyBXaXRjYXNlT2JzZXJ2YWJsZTxUPiB7XG4gIHByb3RlY3RlZCBvYnNlcnZhYmxlOiBPYnNlcnZhYmxlPFQ+O1xuICBwcm90ZWN0ZWQgc3ViamVjdDogU3ViamVjdDxUPjtcblxuICBjb25zdHJ1Y3Rvcigpe1xuICAgIHRoaXMuc3ViamVjdCA9IG5ldyBTdWJqZWN0PFQ+KCk7XG4gICAgdGhpcy5vYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGU8VD4oKS5tdWx0aWNhc3QodGhpcy5zdWJqZWN0KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBzdWJzY3JpYmUob2JzZXJ2ZXI6ICh0OiBUKSA9PiB2b2lkKXtcbiAgICB0aGlzLm9ic2VydmFibGUuc3Vic2NyaWJlKG9ic2VydmVyKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBwdWJsaXNoKHZhbHVlPzogVCl7XG4gICAgdGhpcy5zdWJqZWN0Lm5leHQodmFsdWUpO1xuICB9XG59XG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy93aXRjYXNlX29ic2VydmFibGUudHMiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJAcmVhY3RpdmV4L3J4anNcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAcmVhY3RpdmV4L3J4anNcIlxuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgeyBXaXRjYXNlT2JzZXJ2YWJsZSB9IGZyb20gJy4vd2l0Y2FzZV9vYnNlcnZhYmxlJztcblxuZXhwb3J0IGNsYXNzIFZpZXdPYnNlcnZhYmxlPFQ+IGV4dGVuZHMgV2l0Y2FzZU9ic2VydmFibGU8VD57XG4gIHB1YmxpYyBzdWJzY3JpYmUob2JzZXJ2ZXI6ICh0OiBUKSA9PiB2b2lkKXtcbiAgICBzdXBlci5zdWJzY3JpYmUob2JzZXJ2ZXIpOyBcbiAgfVxuXG4gIHB1YmxpYyBwdWJsaXNoKHZhbHVlPzogVCl7XG4gICAgc3VwZXIucHVibGlzaCh2YWx1ZSk7XG4gIH1cbn1cblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3ZpZXdfb2JzZXJ2YWJsZS50cyIsImV4cG9ydCB7IFdpdGNhc2UgfSBmcm9tICcuL3dpdGNhc2UnO1xuZXhwb3J0IHsgQ29udHJvbGxlciB9IGZyb20gJy4vY29udHJvbGxlcic7XG5leHBvcnQgeyBWaWV3LCBWaWV3Q29tcG9uZW50IH0gZnJvbSAnLi92aWV3JztcbmV4cG9ydCB7IE1vZGVsT2JzZXJ2YWJsZUZhY3RvcnkgfSBmcm9tICcuL21vZGVsX29ic2VydmFibGVfZmFjdG9yeSc7XG5leHBvcnQgeyBWaWV3T2JzZXJ2YWJsZSB9IGZyb20gJy4vdmlld19vYnNlcnZhYmxlJztcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9pbmRleC50cyIsImltcG9ydCB7IFdpdGNhc2VPYnNlcnZhYmxlIH0gZnJvbSAnLi93aXRjYXNlX29ic2VydmFibGUnO1xuXG5leHBvcnQgY2xhc3MgUm91dGVBY3Rpb25QYXJhbXMge1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgcm91dGU6IHN0cmluZywgcHVibGljIGFjdGlvbj86IHN0cmluZywgcHVibGljIHBhcmFtcz86IHN0cmluZyl7fVxufVxuXG5leHBvcnQgY2xhc3MgUm91dGVTZXJ2aWNlIGV4dGVuZHMgV2l0Y2FzZU9ic2VydmFibGU8Um91dGVBY3Rpb25QYXJhbXM+IHtcbiAgcHVibGljIGdvVG8ocm91dGU6IHN0cmluZywgYWN0aW9uPzogc3RyaW5nLCBwYXJhbXM/OiBhbnkpe1xuICAgIHRoaXMucHVibGlzaChuZXcgUm91dGVBY3Rpb25QYXJhbXMocm91dGUsIGFjdGlvbiwgcGFyYW1zKSk7XG4gIH1cblxuICBwdWJsaWMgb25Sb3V0ZShyb3V0ZTogc3RyaW5nLCBvYnNlcnZlcjogKHJvdXRlUGFyYW1zOiBSb3V0ZUFjdGlvblBhcmFtcykgPT4gdm9pZCl7XG4gICAgdGhpcy5vYnNlcnZhYmxlLmZpbHRlcigocm91dGVBY3Rpb25QYXJhbXM6IFJvdXRlQWN0aW9uUGFyYW1zKSA9PiByb3V0ZUFjdGlvblBhcmFtcy5yb3V0ZSA9PSByb3V0ZSkuc3Vic2NyaWJlKG9ic2VydmVyKTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3JvdXRlX3NlcnZpY2UudHMiLCJpbXBvcnQgeyBXaXRjYXNlIH0gZnJvbSAnLi93aXRjYXNlJztcbmltcG9ydCB7IE1vZGVsT2JzZXJ2YWJsZUZhY3RvcnkgfSBmcm9tICcuL21vZGVsX29ic2VydmFibGVfZmFjdG9yeSc7XG5pbXBvcnQgeyBSb3V0ZVNlcnZpY2UgfSBmcm9tICcuL3JvdXRlX3NlcnZpY2UnO1xuXG4vKipcbiAqIENvbnRyb2xsZXIgYWNjZXB0cyBpbnB1dCBmcm9tIHZpZXcgYW5kIGNvbnZlcnRzIG1vZGlmaWVkcyB0aGUgbW9kZWwuXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDb250cm9sbGVyPFQ+IGV4dGVuZHMgTW9kZWxPYnNlcnZhYmxlRmFjdG9yeSB7XG4gIHByb3RlY3RlZCByb3V0ZTogUm91dGVTZXJ2aWNlO1xuXG4gIC8vVE9ETzogd2Ugc2hvdWxkIGluamVjdCB3aXRoIHR5cGVzY3JpcHQtaW9jXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgd2l0Y2FzZTogV2l0Y2FzZTxUPiA9IFdpdGNhc2UuY3VycmVudCl7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLndpdGNhc2UucmVnaXN0ZXJDb250cm9sbGVyKHRoaXMpO1xuICAgIHRoaXMucm91dGUgPSB0aGlzLndpdGNhc2Uucm91dGU7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb250cm9sbGVyLnRzIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwibG9kYXNoXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwibG9kYXNoXCJcbi8vIG1vZHVsZSBpZCA9IDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IHsgV2l0Y2FzZSB9IGZyb20gJy4vd2l0Y2FzZSc7XG5pbXBvcnQgeyBNb2RlbE9ic2VydmFibGVGYWN0b3J5IH0gZnJvbSAnLi9tb2RlbF9vYnNlcnZhYmxlX2ZhY3RvcnknO1xuaW1wb3J0IHsgVmlld09ic2VydmFibGUgfSBmcm9tICcuL3ZpZXdfb2JzZXJ2YWJsZSc7XG5cbi8qKlxuICogQWRkcyBhIGNvbXBvbmVudCB0byB0aGUgdmlldyBhbmQgb3RoZXIgdmlldyBjb21wb25lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBWaWV3Q29tcG9uZW50QWRkZXI8VD4ge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNvbXBvbmVudHM6IFZpZXdDb21wb25lbnQ8VD5bXSwgcHJpdmF0ZSB2aWV3OiBWaWV3PFQ+KSB7fVxuXG4gIHB1YmxpYyBhZGRDb21wb25lbnQ8UyBleHRlbmRzIFZpZXdDb21wb25lbnQ8VD4+KGNvbXBvbmVudDogUyk6IFMge1xuICAgIHRoaXMuY29tcG9uZW50cy5wdXNoKGNvbXBvbmVudCk7XG4gICAgY29tcG9uZW50LmNyZWF0ZUNvbXBvbmVudCh0aGlzLCB0aGlzLnZpZXcpO1xuXG4gICAgcmV0dXJuIGNvbXBvbmVudDtcbiAgfVxufVxuXG4vKipcbiAqIElucHV0IGFuZCBvdXB1dCBmb3IgdGhlIGFwcGxpY2F0aW9uXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBWaWV3PFQ+IGV4dGVuZHMgTW9kZWxPYnNlcnZhYmxlRmFjdG9yeSB7XG4gIHByb3RlY3RlZCBjb21wb25lbnRzOiBWaWV3Q29tcG9uZW50PFQ+W10gPSBbXTtcbiAgcHJpdmF0ZSBjb21wb25lbnRBZGRlcjogVmlld0NvbXBvbmVudEFkZGVyPFQ+ID0gbmV3IFZpZXdDb21wb25lbnRBZGRlcjxUPih0aGlzLmNvbXBvbmVudHMsIHRoaXMpO1xuICBwdWJsaWMgb25DcmVhdGVkOiBWaWV3T2JzZXJ2YWJsZTx2b2lkPiA9IG5ldyBWaWV3T2JzZXJ2YWJsZTx2b2lkPigpO1xuICBwcml2YXRlIGNyZWF0ZWQgPSBmYWxzZTtcblxuICAvL1RPRE86IHdlIHNob3VsZCBpbmplY3Qgd2l0aCB0eXBlc2NyaXB0LWlvY1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHdpdGNhc2U6IFdpdGNhc2U8VD4gPSBXaXRjYXNlLmN1cnJlbnQpe1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy53aXRjYXNlLnJlZ2lzdGVyVmlldyh0aGlzKTtcbiAgfVxuXG4gIHB1YmxpYyBjcmVhdGUoX2NvbXBvbmVudEFkZGVyOiBWaWV3Q29tcG9uZW50QWRkZXI8VD4pIHtcbiAgICAvL2VtcHR5LCBjYW4gYmUgb3ZlcnJpZGVkIG9yIG5vdFxuICB9XG4gIHB1YmxpYyB1cGRhdGUoX2NvbXBvbmVudEFkZGVyOiBWaWV3Q29tcG9uZW50QWRkZXI8VD4pIHtcbiAgICAvL2VtcHR5LCBjYW4gYmUgb3ZlcnJpZGVkIG9yIG5vdFxuICB9XG4gIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgLy9lbXB0eSwgY2FuIGJlIG92ZXJyaWRlZCBvciBub3RcbiAgfVxuXG4gIHB1YmxpYyBzaG93KCkge1xuICAgIHRoaXMuY3JlYXRlVmlldygpO1xuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIHRoaXMuY29tcG9uZW50cykge1xuICAgICAgY29tcG9uZW50LnNob3dDb21wb25lbnQoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaGlkZSgpIHtcbiAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiB0aGlzLmNvbXBvbmVudHMpIHtcbiAgICAgIGNvbXBvbmVudC5oaWRlQ29tcG9uZW50KCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGVuZ2luZSgpOiBUIHsgcmV0dXJuIHRoaXMud2l0Y2FzZS5lbmdpbmU7IH1cblxuICBwcml2YXRlIGNyZWF0ZVZpZXcoKSB7XG4gICAgaWYgKHRoaXMuY3JlYXRlZCkgcmV0dXJuO1xuICAgIHRoaXMuY3JlYXRlZCA9IHRydWU7XG5cbiAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiB0aGlzLmNvbXBvbmVudHMpIHtcbiAgICAgIGNvbXBvbmVudC5jcmVhdGVDb21wb25lbnQodGhpcy5jb21wb25lbnRBZGRlciwgdGhpcyk7XG4gICAgfVxuICAgIHRoaXMuY3JlYXRlKHRoaXMuY29tcG9uZW50QWRkZXIpO1xuICAgIHRoaXMub25DcmVhdGVkLnB1Ymxpc2goKTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVWaWV3KCkge1xuICAgIGlmICghdGhpcy5jcmVhdGVkKSByZXR1cm47XG4gICAgZm9yIChjb25zdCBjb21wb25lbnQgb2YgdGhpcy5jb21wb25lbnRzKSB7XG4gICAgICBjb21wb25lbnQudXBkYXRlQ29tcG9uZW50KHRoaXMuY29tcG9uZW50QWRkZXIpO1xuICAgIH1cbiAgICB0aGlzLnVwZGF0ZSh0aGlzLmNvbXBvbmVudEFkZGVyKTtcbiAgfVxuXG4gIHB1YmxpYyByZW5kZXJWaWV3KCkge1xuICAgIGlmICghdGhpcy5jcmVhdGVkKSByZXR1cm47XG4gICAgZm9yIChjb25zdCBjb21wb25lbnQgb2YgdGhpcy5jb21wb25lbnRzKSB7XG4gICAgICBjb21wb25lbnQucmVuZGVyQ29tcG9uZW50KCk7XG4gICAgfVxuICAgIHRoaXMucmVuZGVyKCk7XG4gIH1cblxuICBwdWJsaWMgZGVzdHJveSgpIHtcbiAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiB0aGlzLmNvbXBvbmVudHMpIHtcbiAgICAgIGNvbXBvbmVudC5kZXN0cm95Q29tcG9uZW50KCk7XG4gICAgfVxuICAgIHRoaXMud2l0Y2FzZS51bnJlZ2lzdGVyVmlldyh0aGlzKTtcbiAgICB0aGlzLmRlc3Ryb3koKTtcbiAgfVxufVxuXG4vKipcbiAqIENvbXBvbmVudCB0byBiZSBzaG93ZWQgaW4gdmlld1xuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVmlld0NvbXBvbmVudDxUPiB7XG4gIHB1YmxpYyB2aWV3OiBWaWV3PFQ+O1xuICBwcm90ZWN0ZWQgY29tcG9uZW50czogVmlld0NvbXBvbmVudDxUPltdID0gW107XG4gIHByaXZhdGUgX3Zpc2libGU6IGJvb2xlYW4gPSB0cnVlO1xuICBwcml2YXRlIF9sb2NhbENhbGw6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwdWJsaWMgY3JlYXRlKF9jb21wb25lbnRBZGRlcjogVmlld0NvbXBvbmVudEFkZGVyPFQ+KTogdm9pZCB7XG4gICAgLy9lbXB0eSwgY2FuIGJlIG92ZXJyaWRlZCBvciBub3RcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGUoX2NvbXBvbmVudEFkZGVyOiBWaWV3Q29tcG9uZW50QWRkZXI8VD4pOiB2b2lkIHtcbiAgICAvL2VtcHR5LCBjYW4gYmUgb3ZlcnJpZGVkIG9yIG5vdFxuICB9XG5cbiAgcHVibGljIHJlbmRlcigpOiB2b2lkIHtcbiAgICAvL2VtcHR5LCBjYW4gYmUgb3ZlcnJpZGVkIG9yIG5vdFxuICB9XG5cbiAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgLy9lbXB0eSwgY2FuIGJlIG92ZXJyaWRlZCBvciBub3RcbiAgfVxuXG4gIHB1YmxpYyBjcmVhdGVDb21wb25lbnQoY29tcG9uZW50QWRkZXI6IFZpZXdDb21wb25lbnRBZGRlcjxUPiwgdmlldzogVmlldzxUPik6IHZvaWQge1xuICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgdGhpcy5jcmVhdGUoY29tcG9uZW50QWRkZXIpO1xuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIHRoaXMuY29tcG9uZW50cykge1xuICAgICAgY29tcG9uZW50LmNyZWF0ZUNvbXBvbmVudChjb21wb25lbnRBZGRlciwgdmlldyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHVwZGF0ZUNvbXBvbmVudChjb21wb25lbnRBZGRlcjogVmlld0NvbXBvbmVudEFkZGVyPFQ+KTogdm9pZCB7XG4gICAgdGhpcy51cGRhdGUoY29tcG9uZW50QWRkZXIpO1xuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIHRoaXMuY29tcG9uZW50cykge1xuICAgICAgY29tcG9uZW50LnVwZGF0ZUNvbXBvbmVudChjb21wb25lbnRBZGRlcik7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlbmRlckNvbXBvbmVudCgpOiB2b2lkIHtcbiAgICB0aGlzLnJlbmRlcigpO1xuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIHRoaXMuY29tcG9uZW50cykge1xuICAgICAgY29tcG9uZW50LnJlbmRlckNvbXBvbmVudCgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBkZXN0cm95Q29tcG9uZW50KCk6IHZvaWQge1xuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIHRoaXMuY29tcG9uZW50cykge1xuICAgICAgY29tcG9uZW50LmRlc3Ryb3lDb21wb25lbnQoKTtcbiAgICB9XG4gICAgdGhpcy5kZXN0cm95KCk7XG4gIH1cblxuICBwdWJsaWMgaGlkZUNvbXBvbmVudCgpOiB2b2lkIHtcbiAgICB0aGlzLl9sb2NhbENhbGwgPSB0cnVlO1xuICAgIHRoaXMuaGlkZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBoaWRlQWxsQ29tcG9uZW50cygpIHtcbiAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiB0aGlzLmNvbXBvbmVudHMpIHtcbiAgICAgIGNvbXBvbmVudC5oaWRlQ29tcG9uZW50KCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHNob3dDb21wb25lbnQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3Zpc2libGUpIHtcbiAgICAgIHRoaXMuX2xvY2FsQ2FsbCA9IHRydWU7XG4gICAgICB0aGlzLnNob3coKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNob3dBbGxDb21wb25lbnRzKCkge1xuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIHRoaXMuY29tcG9uZW50cykge1xuICAgICAgY29tcG9uZW50LnNob3dDb21wb25lbnQoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaGlkZSgpOiB2b2lkIHtcbiAgICB0aGlzLmhpZGVBbGxDb21wb25lbnRzKCk7XG4gICAgaWYgKHRoaXMuX2xvY2FsQ2FsbCkgdGhpcy5fbG9jYWxDYWxsID0gZmFsc2U7IC8vbm8gc2V0IF92aXNpYmxlIGZhbHNlIGlmIHNob3cgY29tZXMgZnJvbSB2aWV3IHNob3cgbWV0aG9kXG4gICAgZWxzZSB0aGlzLl92aXNpYmxlID0gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgc2hvdygpOiB2b2lkIHtcbiAgICB0aGlzLnNob3dBbGxDb21wb25lbnRzKCk7XG4gICAgaWYgKHRoaXMuX2xvY2FsQ2FsbCkgdGhpcy5fbG9jYWxDYWxsID0gZmFsc2U7IC8vbm8gc2V0IF92aXNpYmxlIHRydWUgaWYgc2hvdyBjb21lcyBmcm9tIHZpZXcgc2hvdyBtZXRob2RcbiAgICBlbHNlIHRoaXMuX3Zpc2libGUgPSB0cnVlO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldCBlbmdpbmUoKTogVCB7XG4gICAgcmV0dXJuIHRoaXMudmlldy5lbmdpbmU7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy92aWV3LnRzIl0sInNvdXJjZVJvb3QiOiIifQ==