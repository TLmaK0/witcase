(function(e, a) { for(var i in a) e[i] = a[i]; }(exports, /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 4);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Witcase = /** @class */ (function () {
    function Witcase() {
        var _this = this;
        this.views = [];
        this.create = function () {
            _this.defaultAction();
        };
        this.preload = function () {
            for (var _i = 0, _a = Witcase.resourceLoaders; _i < _a.length; _i++) {
                var resourceLoader = _a[_i];
                resourceLoader(_this.engine);
            }
        };
        this.update = function () {
            for (var _i = 0, _a = _this.views; _i < _a.length; _i++) {
                var view = _a[_i];
                view.updateView();
            }
        };
        this.render = function () {
            for (var _i = 0, _a = _this.views; _i < _a.length; _i++) {
                var view = _a[_i];
                view.renderView();
            }
        };
    }
    Witcase.create = function () {
        Witcase.current = new Witcase();
        return Witcase.current;
    };
    Witcase.prototype.start = function (engineStarter) {
        this.engine = engineStarter(this);
    };
    Witcase.preload = function (resourceLoader) {
        Witcase.resourceLoaders.push(resourceLoader);
    };
    Witcase.prototype.registerView = function (view) {
        this.views.push(view);
    };
    Witcase.prototype.unregisterView = function (viewToRemove) {
        this.views = this.views.filter(function (view) { return viewToRemove !== view; });
    };
    Witcase.resourceLoaders = [];
    return Witcase;
}());
exports.Witcase = Witcase;


/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var model_observable_1 = __webpack_require__(7);
var rxjs_1 = __webpack_require__(2);
var _ = __webpack_require__(8);
var ModelObservableFactory = /** @class */ (function () {
    function ModelObservableFactory() {
        this.modelObservables = [];
    }
    ModelObservableFactory.prototype.create = function (getModel) {
        var modelObservable = new model_observable_1.ModelObservable();
        modelObservable.observable = rxjs_1.Observable.create(function (observer) { return modelObservable.observer = observer; }).map(function (model) { return _.cloneDeep(model); }).distinctUntilChanged(function (prev, next) { return _.isEqual(prev, next); });
        modelObservable.getModel = getModel;
        this.modelObservables.push(modelObservable);
        return modelObservable.observable;
    };
    return ModelObservableFactory;
}());
exports.ModelObservableFactory = ModelObservableFactory;


/***/ }),
/* 2 */
/***/ (function(module, exports) {

module.exports = require("@reactivex/rxjs");

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var rxjs_1 = __webpack_require__(2);
var ViewObservable = /** @class */ (function () {
    function ViewObservable() {
        this.subject = new rxjs_1.Subject();
        this.observable = new rxjs_1.Observable().multicast(this.subject);
    }
    ViewObservable.prototype.subscribe = function (observer) {
        this.observable.subscribe(observer);
    };
    ViewObservable.prototype.publish = function (value) {
        this.subject.next(value);
    };
    return ViewObservable;
}());
exports.ViewObservable = ViewObservable;


/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var witcase_1 = __webpack_require__(0);
exports.Witcase = witcase_1.Witcase;
var controller_1 = __webpack_require__(5);
exports.Controller = controller_1.Controller;
var view_1 = __webpack_require__(6);
exports.View = view_1.View;
exports.ViewComponent = view_1.ViewComponent;
var model_observable_factory_1 = __webpack_require__(1);
exports.ModelObservableFactory = model_observable_factory_1.ModelObservableFactory;
var view_observable_1 = __webpack_require__(3);
exports.ViewObservable = view_observable_1.ViewObservable;


/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Controller accepts input from view and converts modifieds the model.
 */
var Controller = /** @class */ (function () {
    function Controller() {
    }
    return Controller;
}());
exports.Controller = Controller;


/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var witcase_1 = __webpack_require__(0);
var model_observable_factory_1 = __webpack_require__(1);
var view_observable_1 = __webpack_require__(3);
/**
 * Adds a component to the view and other view components
 */
var ViewComponentAdder = /** @class */ (function () {
    function ViewComponentAdder(components, view) {
        this.components = components;
        this.view = view;
    }
    ViewComponentAdder.prototype.addComponent = function (component) {
        this.components.push(component);
        component.createComponent(this, this.view);
        return component;
    };
    return ViewComponentAdder;
}());
exports.ViewComponentAdder = ViewComponentAdder;
/**
 * Input and ouput for the application
 */
var View = /** @class */ (function () {
    //TODO: we should inject with typescript-ioc
    function View(witcase) {
        if (witcase === void 0) { witcase = witcase_1.Witcase.current; }
        this.witcase = witcase;
        this.components = [];
        this.modelObservableFactory = new model_observable_factory_1.ModelObservableFactory();
        this.componentAdder = new ViewComponentAdder(this.components, this);
        this.onCreated = new view_observable_1.ViewObservable();
        this.created = false;
        this.witcase.registerView(this);
    }
    View.prototype.create = function (_componentAdder) {
        //empty, can be overrided or not
    };
    View.prototype.update = function () {
        //empty, can be overrided or not
    };
    View.prototype.render = function () {
        //empty, can be overrided or not
    };
    View.prototype.show = function () {
        this.createView();
    };
    Object.defineProperty(View.prototype, "engine", {
        get: function () { return this.witcase.engine; },
        enumerable: true,
        configurable: true
    });
    View.prototype.createView = function () {
        if (this.created)
            return;
        this.created = true;
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.createComponent(this.componentAdder, this);
        }
        this.create(this.componentAdder);
        this.onCreated.publish();
        this.updateOnModelChange(this.modelObservableFactory);
    };
    View.prototype.hide = function () {
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.hideComponent();
        }
    };
    View.prototype.updateView = function () {
        if (!this.created)
            return;
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.updateComponent(this.componentAdder);
        }
        this.checkModels();
        this.update();
    };
    View.prototype.renderView = function () {
        if (!this.created)
            return;
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.renderComponent();
        }
        this.render();
    };
    View.prototype.destroy = function () {
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.destroyComponent();
        }
        this.witcase.unregisterView(this);
        this.destroy();
    };
    View.prototype.updateOnModelChange = function (_modelObservableFactory) {
        //this should be overrided or not
    };
    View.prototype.checkModels = function () {
        for (var _i = 0, _a = this.modelObservableFactory.modelObservables; _i < _a.length; _i++) {
            var modelObservable = _a[_i];
            modelObservable.observer.next(modelObservable.getModel());
        }
    };
    return View;
}());
exports.View = View;
/**
 * Component to be showed in view
 */
var ViewComponent = /** @class */ (function () {
    function ViewComponent() {
        this.components = [];
    }
    ViewComponent.prototype.create = function (_componentAdder) {
        //empty, can be overrided or not
    };
    ViewComponent.prototype.update = function (_componentAdder) {
        //empty, can be overrided or not
    };
    ViewComponent.prototype.render = function () {
        //empty, can be overrided or not
    };
    ViewComponent.prototype.destroy = function () {
        //empty, can be overrided or not
    };
    ViewComponent.prototype.createComponent = function (componentAdder, view) {
        this.view = view;
        this.create(componentAdder);
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.createComponent(componentAdder, view);
        }
    };
    ViewComponent.prototype.updateComponent = function (componentAdder) {
        this.update(componentAdder);
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.updateComponent(componentAdder);
        }
    };
    ViewComponent.prototype.renderComponent = function () {
        this.render();
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.renderComponent();
        }
    };
    ViewComponent.prototype.destroyComponent = function () {
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.destroyComponent();
        }
        this.destroy();
    };
    ViewComponent.prototype.hideComponent = function () {
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.hideComponent();
        }
        this.hide();
    };
    ViewComponent.prototype.hide = function () {
    };
    Object.defineProperty(ViewComponent.prototype, "engine", {
        get: function () {
            return this.view.engine;
        },
        enumerable: true,
        configurable: true
    });
    return ViewComponent;
}());
exports.ViewComponent = ViewComponent;


/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var ModelObservable = /** @class */ (function () {
    function ModelObservable() {
    }
    return ModelObservable;
}());
exports.ModelObservable = ModelObservable;


/***/ }),
/* 8 */
/***/ (function(module, exports) {

module.exports = require("lodash");

/***/ })
/******/ ])));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNWM1MjQ2OGQ0MmRiOThmMGY5M2IiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dpdGNhc2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsX29ic2VydmFibGVfZmFjdG9yeS50cyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAcmVhY3RpdmV4L3J4anNcIiIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld19vYnNlcnZhYmxlLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlldy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxfb2JzZXJ2YWJsZS50cyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJsb2Rhc2hcIiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1DQUEyQiwwQkFBMEIsRUFBRTtBQUN2RCx5Q0FBaUMsZUFBZTtBQUNoRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4REFBc0QsK0RBQStEOztBQUVySDtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7Ozs7QUN0REE7SUFTRTtRQUFBLGlCQUNDO1FBSE8sVUFBSyxHQUFjLEVBQUUsQ0FBQztRQWN2QixXQUFNLEdBQUc7WUFDZCxLQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDdkIsQ0FBQztRQVFNLFlBQU8sR0FBRztZQUNmLEdBQUcsQ0FBQyxDQUF5QixVQUF1QixFQUF2QixZQUFPLENBQUMs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QWU7Ozs7Ozs7QUNGNUIsbUMiLCJmaWxlIjoid2l0Y2FzZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA0KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCA1YzUyNDY4ZDQyZGI5OGYwZjkzYiIsIi8qKlxuICovXG5pbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSAnLi9jb250cm9sbGVyJztcbmltcG9ydCB7IEJhc2VFbmdpbmUgfSBmcm9tICcuL2Jhc2VfZW5naW5lJztcbmltcG9ydCB7IFZpZXcgfSBmcm9tICcuL3ZpZXcnO1xuaW1wb3J0IHsgR3VpZCB9IGZyb20gJy4vZ3VpZCc7XG5cbmV4cG9ydCBjbGFzcyBXaXRjYXNlPFQ+IGltcGxlbWVudHMgQmFzZUVuZ2luZSB7XG4gIHB1YmxpYyBlbmdpbmU6IFQ7XG5cbiAgcHVibGljIGRlZmF1bHRBY3Rpb246ICgpID0+IHZvaWQ7XG5cbiAgcHVibGljIHN0YXRpYyBjdXJyZW50OiBhbnk7XG5cbiAgcHJpdmF0ZSB2aWV3czogVmlldzxUPltdID0gW107XG5cbiAgcHJpdmF0ZSBjb25zdHJ1Y3Rvcigpe1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBjcmVhdGU8VD4oKXtcbiAgICBXaXRjYXNlLmN1cnJlbnQgPSBuZXcgV2l0Y2FzZTxUPigpO1xuICAgIHJldHVybiBXaXRjYXNlLmN1cnJlbnQ7XG4gIH1cblxuICBwdWJsaWMgc3RhcnQoZW5naW5lU3RhcnRlcjogKGJhc2VFbmdpbmU6IEJhc2VFbmdpbmUpID0+IFQpOiB2b2lkIHtcbiAgICB0aGlzLmVuZ2luZSA9IGVuZ2luZVN0YXJ0ZXIodGhpcyk7XG4gIH1cblxuICBwdWJsaWMgY3JlYXRlID0gKCk6IHZvaWQgPT4ge1xuICAgIHRoaXMuZGVmYXVsdEFjdGlvbigpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgcmVzb3VyY2VMb2FkZXJzOiAoKGVuZ2luZTogYW55KSA9PiB2b2lkKVtdID0gW107XG5cbiAgcHVibGljIHN0YXRpYyBwcmVsb2FkPFQ+KHJlc291cmNlTG9hZGVyOiAoZW5naW5lOiBUKT0+dm9pZCk6dm9pZCB7XG4gICAgV2l0Y2FzZS5yZXNvdXJjZUxvYWRlcnMucHVzaChyZXNvdXJjZUxvYWRlcik7XG4gIH1cblxuICBwdWJsaWMgcHJlbG9hZCA9ICgpOiB2b2lkID0+IHtcbiAgICBmb3IgKGNvbnN0IHJlc291cmNlTG9hZGVyIG9mIFdpdGNhc2UucmVzb3VyY2VMb2FkZXJzKXtcbiAgICAgIHJlc291cmNlTG9hZGVyKHRoaXMuZW5naW5lKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlID0gKCk6IHZvaWQgPT4ge1xuICAgIGZvciAoY29uc3QgdmlldyBvZiB0aGlzLnZpZXdzKXtcbiAgICAgIHZpZXcudXBkYXRlVmlldygpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZW5kZXIgPSAoKTogdm9pZCA9PiB7XG4gICAgZm9yIChjb25zdCB2aWV3IG9mIHRoaXMudmlld3Mpe1xuICAgICAgdmlldy5yZW5kZXJWaWV3KCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlZ2lzdGVyVmlldyh2aWV3OiBWaWV3PFQ+KXtcbiAgICB0aGlzLnZpZXdzLnB1c2godmlldyk7XG4gIH1cblxuICBwdWJsaWMgdW5yZWdpc3RlclZpZXcodmlld1RvUmVtb3ZlOiBWaWV3PFQ+KXtcbiAgICB0aGlzLnZpZXdzID0gdGhpcy52aWV3cy5maWx0ZXIoKHZpZXcpID0+IHsgcmV0dXJuIHZpZXdUb1JlbW92ZSAhPT0gdmlldyB9KTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3dpdGNhc2UudHMiLCJpbXBvcnQgeyBNb2RlbE9ic2VydmFibGUgfSBmcm9tICcuL21vZGVsX29ic2VydmFibGUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgT2JzZXJ2ZXIgfSBmcm9tICdAcmVhY3RpdmV4L3J4anMnO1xuaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnQgY2xhc3MgTW9kZWxPYnNlcnZhYmxlRmFjdG9yeSB7XG4gIHB1YmxpYyBtb2RlbE9ic2VydmFibGVzOiBNb2RlbE9ic2VydmFibGU8YW55PltdID0gW107XG5cbiAgY29uc3RydWN0b3IoKXtcbiAgfVxuXG4gIHB1YmxpYyBjcmVhdGU8VD4oZ2V0TW9kZWw6ICgpID0+IFQpOiBPYnNlcnZhYmxlPFQ+IHtcbiAgICBjb25zdCBtb2RlbE9ic2VydmFibGUgPSBuZXcgTW9kZWxPYnNlcnZhYmxlPFQ+KCk7XG5cbiAgICBtb2RlbE9ic2VydmFibGUub2JzZXJ2YWJsZSA9IE9ic2VydmFibGUuY3JlYXRlKFxuICAgICAgKG9ic2VydmVyOiBPYnNlcnZlcjwoKSA9PiBUPikgPT4gbW9kZWxPYnNlcnZhYmxlLm9ic2VydmVyID0gb2JzZXJ2ZXJcbiAgICApLm1hcChcbiAgICAgIChtb2RlbDogVCkgPT4gXy5jbG9uZURlZXAobW9kZWwpXG4gICAgKS5kaXN0aW5jdFVudGlsQ2hhbmdlZChcbiAgICAgIChwcmV2OiBULCBuZXh0OiBUKSA9PiBfLmlzRXF1YWwocHJldiwgbmV4dClcbiAgICApO1xuXG4gICAgbW9kZWxPYnNlcnZhYmxlLmdldE1vZGVsID0gZ2V0TW9kZWw7XG5cbiAgICB0aGlzLm1vZGVsT2JzZXJ2YWJsZXMucHVzaChtb2RlbE9ic2VydmFibGUpOyBcblxuICAgIHJldHVybiBtb2RlbE9ic2VydmFibGUub2JzZXJ2YWJsZTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL21vZGVsX29ic2VydmFibGVfZmFjdG9yeS50cyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIkByZWFjdGl2ZXgvcnhqc1wiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkByZWFjdGl2ZXgvcnhqc1wiXG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCB7IE9ic2VydmFibGUsIE9ic2VydmVyLCBTdWJqZWN0IH0gZnJvbSAnQHJlYWN0aXZleC9yeGpzJztcblxuZXhwb3J0IGNsYXNzIFZpZXdPYnNlcnZhYmxlPFQ+IHtcbiAgcHJpdmF0ZSBvYnNlcnZhYmxlOiBPYnNlcnZhYmxlPFQ+O1xuICBwcml2YXRlIHN1YmplY3Q6IFN1YmplY3Q8VD47XG5cbiAgY29uc3RydWN0b3IoKXtcbiAgICB0aGlzLnN1YmplY3QgPSBuZXcgU3ViamVjdDxUPigpO1xuICAgIHRoaXMub2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlPFQ+KCkubXVsdGljYXN0KHRoaXMuc3ViamVjdCk7XG4gIH1cblxuICBwdWJsaWMgc3Vic2NyaWJlKG9ic2VydmVyOiAodDogVCkgPT4gdm9pZCl7XG4gICAgdGhpcy5vYnNlcnZhYmxlLnN1YnNjcmliZShvYnNlcnZlcik7XG4gIH1cblxuICBwdWJsaWMgcHVibGlzaCh2YWx1ZT86IFQpe1xuICAgIHRoaXMuc3ViamVjdC5uZXh0KHZhbHVlKTtcbiAgfVxufVxuXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdmlld19vYnNlcnZhYmxlLnRzIiwiZXhwb3J0IHsgV2l0Y2FzZSB9IGZyb20gJy4vd2l0Y2FzZSc7XG5leHBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSAnLi9jb250cm9sbGVyJztcbmV4cG9ydCB7IFZpZXcsIFZpZXdDb21wb25lbnQgfSBmcm9tICcuL3ZpZXcnO1xuZXhwb3J0IHsgTW9kZWxPYnNlcnZhYmxlRmFjdG9yeSB9IGZyb20gJy4vbW9kZWxfb2JzZXJ2YWJsZV9mYWN0b3J5JztcbmV4cG9ydCB7IFZpZXdPYnNlcnZhYmxlIH0gZnJvbSAnLi92aWV3X29ic2VydmFibGUnO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2luZGV4LnRzIiwiLyoqXG4gKiBDb250cm9sbGVyIGFjY2VwdHMgaW5wdXQgZnJvbSB2aWV3IGFuZCBjb252ZXJ0cyBtb2RpZmllZHMgdGhlIG1vZGVsLlxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQ29udHJvbGxlciB7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29udHJvbGxlci50cyIsImltcG9ydCB7IFdpdGNhc2UgfSBmcm9tICcuL3dpdGNhc2UnO1xuaW1wb3J0IHsgTW9kZWxPYnNlcnZhYmxlIH0gZnJvbSAnLi9tb2RlbF9vYnNlcnZhYmxlJztcbmltcG9ydCB7IE1vZGVsT2JzZXJ2YWJsZUZhY3RvcnkgfSBmcm9tICcuL21vZGVsX29ic2VydmFibGVfZmFjdG9yeSc7XG5pbXBvcnQgeyBWaWV3T2JzZXJ2YWJsZSB9IGZyb20gJy4vdmlld19vYnNlcnZhYmxlJztcblxuLyoqXG4gKiBBZGRzIGEgY29tcG9uZW50IHRvIHRoZSB2aWV3IGFuZCBvdGhlciB2aWV3IGNvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGNsYXNzIFZpZXdDb21wb25lbnRBZGRlcjxUPiB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgY29tcG9uZW50czogVmlld0NvbXBvbmVudDxUPltdLCBwcml2YXRlIHZpZXc6IFZpZXc8VD4pIHt9XG5cbiAgcHVibGljIGFkZENvbXBvbmVudDxTIGV4dGVuZHMgVmlld0NvbXBvbmVudDxUPj4oY29tcG9uZW50OiBTKTogUyB7XG4gICAgdGhpcy5jb21wb25lbnRzLnB1c2goY29tcG9uZW50KTtcbiAgICBjb21wb25lbnQuY3JlYXRlQ29tcG9uZW50KHRoaXMsIHRoaXMudmlldyk7XG5cbiAgICByZXR1cm4gY29tcG9uZW50O1xuICB9XG59XG5cbi8qKlxuICogSW5wdXQgYW5kIG91cHV0IGZvciB0aGUgYXBwbGljYXRpb25cbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFZpZXc8VD4ge1xuICBwcm90ZWN0ZWQgY29tcG9uZW50czogVmlld0NvbXBvbmVudDxUPltdID0gW107XG4gIHByaXZhdGUgbW9kZWxPYnNlcnZhYmxlRmFjdG9yeTogTW9kZWxPYnNlcnZhYmxlRmFjdG9yeSA9IG5ldyBNb2RlbE9ic2VydmFibGVGYWN0b3J5KCk7XG4gIHByaXZhdGUgY29tcG9uZW50QWRkZXI6IFZpZXdDb21wb25lbnRBZGRlcjxUPiA9IG5ldyBWaWV3Q29tcG9uZW50QWRkZXI8VD4odGhpcy5jb21wb25lbnRzLCB0aGlzKTtcbiAgcHVibGljIG9uQ3JlYXRlZDogVmlld09ic2VydmFibGU8dm9pZD4gPSBuZXcgVmlld09ic2VydmFibGU8dm9pZD4oKTtcbiAgcHJpdmF0ZSBjcmVhdGVkID0gZmFsc2U7XG5cbiAgLy9UT0RPOiB3ZSBzaG91bGQgaW5qZWN0IHdpdGggdHlwZXNjcmlwdC1pb2NcbiAgY29uc3RydWN0b3IocHJpdmF0ZSB3aXRjYXNlOiBXaXRjYXNlPFQ+ID0gV2l0Y2FzZS5jdXJyZW50KXtcbiAgICB0aGlzLndpdGNhc2UucmVnaXN0ZXJWaWV3KHRoaXMpO1xuICB9XG5cbiAgcHVibGljIGNyZWF0ZShfY29tcG9uZW50QWRkZXI6IFZpZXdDb21wb25lbnRBZGRlcjxUPikge1xuICAgIC8vZW1wdHksIGNhbiBiZSBvdmVycmlkZWQgb3Igbm90XG4gIH1cbiAgcHVibGljIHVwZGF0ZSgpIHtcbiAgICAvL2VtcHR5LCBjYW4gYmUgb3ZlcnJpZGVkIG9yIG5vdFxuICB9XG4gIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgLy9lbXB0eSwgY2FuIGJlIG92ZXJyaWRlZCBvciBub3RcbiAgfVxuXG4gIHB1YmxpYyBzaG93KCkge1xuICAgIHRoaXMuY3JlYXRlVmlldygpO1xuICB9XG5cbiAgZ2V0IGVuZ2luZSgpOiBUIHsgcmV0dXJuIHRoaXMud2l0Y2FzZS5lbmdpbmU7IH1cblxuICBwcml2YXRlIGNyZWF0ZVZpZXcoKSB7XG4gICAgaWYgKHRoaXMuY3JlYXRlZCkgcmV0dXJuO1xuICAgIHRoaXMuY3JlYXRlZCA9IHRydWU7XG5cbiAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiB0aGlzLmNvbXBvbmVudHMpIHtcbiAgICAgIGNvbXBvbmVudC5jcmVhdGVDb21wb25lbnQodGhpcy5jb21wb25lbnRBZGRlciwgdGhpcyk7XG4gICAgfVxuICAgIHRoaXMuY3JlYXRlKHRoaXMuY29tcG9uZW50QWRkZXIpO1xuICAgIHRoaXMub25DcmVhdGVkLnB1Ymxpc2goKTtcbiAgICB0aGlzLnVwZGF0ZU9uTW9kZWxDaGFuZ2UodGhpcy5tb2RlbE9ic2VydmFibGVGYWN0b3J5KTtcbiAgfVxuXG4gIHB1YmxpYyBoaWRlKCkge1xuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIHRoaXMuY29tcG9uZW50cykge1xuICAgICAgY29tcG9uZW50LmhpZGVDb21wb25lbnQoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlVmlldygpIHtcbiAgICBpZiAoIXRoaXMuY3JlYXRlZCkgcmV0dXJuO1xuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIHRoaXMuY29tcG9uZW50cykge1xuICAgICAgY29tcG9uZW50LnVwZGF0ZUNvbXBvbmVudCh0aGlzLmNvbXBvbmVudEFkZGVyKTtcbiAgICB9XG4gICAgdGhpcy5jaGVja01vZGVscygpO1xuICAgIHRoaXMudXBkYXRlKCk7XG4gIH1cblxuICBwdWJsaWMgcmVuZGVyVmlldygpIHtcbiAgICBpZiAoIXRoaXMuY3JlYXRlZCkgcmV0dXJuO1xuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIHRoaXMuY29tcG9uZW50cykge1xuICAgICAgY29tcG9uZW50LnJlbmRlckNvbXBvbmVudCgpO1xuICAgIH1cbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgcHVibGljIGRlc3Ryb3koKSB7XG4gICAgZm9yIChjb25zdCBjb21wb25lbnQgb2YgdGhpcy5jb21wb25lbnRzKSB7XG4gICAgICBjb21wb25lbnQuZGVzdHJveUNvbXBvbmVudCgpO1xuICAgIH1cbiAgICB0aGlzLndpdGNhc2UudW5yZWdpc3RlclZpZXcodGhpcyk7XG4gICAgdGhpcy5kZXN0cm95KCk7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlT25Nb2RlbENoYW5nZShfbW9kZWxPYnNlcnZhYmxlRmFjdG9yeTogTW9kZWxPYnNlcnZhYmxlRmFjdG9yeSl7XG4gICAgLy90aGlzIHNob3VsZCBiZSBvdmVycmlkZWQgb3Igbm90XG4gIH1cblxuICBwcml2YXRlIGNoZWNrTW9kZWxzKCl7XG4gICAgZm9yKGNvbnN0IG1vZGVsT2JzZXJ2YWJsZSBvZiB0aGlzLm1vZGVsT2JzZXJ2YWJsZUZhY3RvcnkubW9kZWxPYnNlcnZhYmxlcyl7XG4gICAgICBtb2RlbE9ic2VydmFibGUub2JzZXJ2ZXIubmV4dChtb2RlbE9ic2VydmFibGUuZ2V0TW9kZWwoKSk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQ29tcG9uZW50IHRvIGJlIHNob3dlZCBpbiB2aWV3XG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBWaWV3Q29tcG9uZW50PFQ+IHtcbiAgcHVibGljIHZpZXc6IFZpZXc8VD47XG4gIHByb3RlY3RlZCBjb21wb25lbnRzOiBWaWV3Q29tcG9uZW50PFQ+W10gPSBbXTtcblxuICBwdWJsaWMgY3JlYXRlKF9jb21wb25lbnRBZGRlcjogVmlld0NvbXBvbmVudEFkZGVyPFQ+KTogdm9pZCB7XG4gICAgLy9lbXB0eSwgY2FuIGJlIG92ZXJyaWRlZCBvciBub3RcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGUoX2NvbXBvbmVudEFkZGVyOiBWaWV3Q29tcG9uZW50QWRkZXI8VD4pOiB2b2lkIHtcbiAgICAvL2VtcHR5LCBjYW4gYmUgb3ZlcnJpZGVkIG9yIG5vdFxuICB9XG5cbiAgcHVibGljIHJlbmRlcigpOiB2b2lkIHtcbiAgICAvL2VtcHR5LCBjYW4gYmUgb3ZlcnJpZGVkIG9yIG5vdFxuICB9XG5cbiAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgLy9lbXB0eSwgY2FuIGJlIG92ZXJyaWRlZCBvciBub3RcbiAgfVxuXG4gIHB1YmxpYyBjcmVhdGVDb21wb25lbnQoY29tcG9uZW50QWRkZXI6IFZpZXdDb21wb25lbnRBZGRlcjxUPiwgdmlldzogVmlldzxUPik6IHZvaWQge1xuICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgdGhpcy5jcmVhdGUoY29tcG9uZW50QWRkZXIpO1xuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIHRoaXMuY29tcG9uZW50cykge1xuICAgICAgY29tcG9uZW50LmNyZWF0ZUNvbXBvbmVudChjb21wb25lbnRBZGRlciwgdmlldyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHVwZGF0ZUNvbXBvbmVudChjb21wb25lbnRBZGRlcjogVmlld0NvbXBvbmVudEFkZGVyPFQ+KTogdm9pZCB7XG4gICAgdGhpcy51cGRhdGUoY29tcG9uZW50QWRkZXIpO1xuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIHRoaXMuY29tcG9uZW50cykge1xuICAgICAgY29tcG9uZW50LnVwZGF0ZUNvbXBvbmVudChjb21wb25lbnRBZGRlcik7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlbmRlckNvbXBvbmVudCgpOiB2b2lkIHtcbiAgICB0aGlzLnJlbmRlcigpO1xuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIHRoaXMuY29tcG9uZW50cykge1xuICAgICAgY29tcG9uZW50LnJlbmRlckNvbXBvbmVudCgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBkZXN0cm95Q29tcG9uZW50KCk6IHZvaWQge1xuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIHRoaXMuY29tcG9uZW50cykge1xuICAgICAgY29tcG9uZW50LmRlc3Ryb3lDb21wb25lbnQoKTtcbiAgICB9XG4gICAgdGhpcy5kZXN0cm95KCk7XG4gIH1cblxuICBwdWJsaWMgaGlkZUNvbXBvbmVudCgpOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiB0aGlzLmNvbXBvbmVudHMpIHtcbiAgICAgIGNvbXBvbmVudC5oaWRlQ29tcG9uZW50KCk7XG4gICAgfVxuICAgIHRoaXMuaGlkZSgpO1xuICB9XG5cbiAgcHVibGljIGhpZGUoKTogdm9pZCB7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0IGVuZ2luZSgpOiBUIHtcbiAgICByZXR1cm4gdGhpcy52aWV3LmVuZ2luZTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3ZpZXcudHMiLCJpbXBvcnQgeyBPYnNlcnZhYmxlLCBPYnNlcnZlciB9IGZyb20gJ0ByZWFjdGl2ZXgvcnhqcyc7XG5cbmV4cG9ydCBjbGFzcyBNb2RlbE9ic2VydmFibGU8VD4ge1xuICBvYnNlcnZhYmxlOiBPYnNlcnZhYmxlPFQ+O1xuICBvYnNlcnZlcjogT2JzZXJ2ZXI8KCkgPT4gVD47XG4gIGdldE1vZGVsOiAoKSA9PiBUO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL21vZGVsX29ic2VydmFibGUudHMiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJsb2Rhc2hcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJsb2Rhc2hcIlxuLy8gbW9kdWxlIGlkID0gOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9